<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-2D Context/physics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Collision detection and physics | Training Home</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://purusgames.com/fresher-training-doc/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://purusgames.com/fresher-training-doc/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://purusgames.com/fresher-training-doc/docs/2D Context/physics"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Collision detection and physics | Training Home"><meta data-rh="true" name="description" content="Perform collision detection and react with physics, using JavaScript. Check for overlap between shapes, apply hitboxes and calculate new velocities. Make it more natural with object mass, gravity and restitution. By the end of this tutorial, you&#x27;ll have a basic physics simulation running in your game."><meta data-rh="true" property="og:description" content="Perform collision detection and react with physics, using JavaScript. Check for overlap between shapes, apply hitboxes and calculate new velocities. Make it more natural with object mass, gravity and restitution. By the end of this tutorial, you&#x27;ll have a basic physics simulation running in your game."><link data-rh="true" rel="icon" href="/fresher-training-doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://purusgames.com/fresher-training-doc/docs/2D Context/physics"><link data-rh="true" rel="alternate" href="https://purusgames.com/fresher-training-doc/docs/2D Context/physics" hreflang="en"><link data-rh="true" rel="alternate" href="https://purusgames.com/fresher-training-doc/docs/2D Context/physics" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/fresher-training-doc/blog/rss.xml" title="Training Home RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/fresher-training-doc/blog/atom.xml" title="Training Home Atom Feed"><link rel="stylesheet" href="/fresher-training-doc/assets/css/styles.c7c4964a.css">
<script src="/fresher-training-doc/assets/js/runtime~main.d5d55152.js" defer="defer"></script>
<script src="/fresher-training-doc/assets/js/main.d8543c0b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fresher-training-doc/"><div class="navbar__logo"><img src="/fresher-training-doc/img/logo.svg" alt="Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/fresher-training-doc/img/logo.svg" alt="Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Purus Games</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fresher-training-doc/docs/program">Training</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fresher-training-doc/docs/program">Fresher Training Program</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/fresher-training-doc/docs/2D Context/introduction">2D Context</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/2D Context/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/2D Context/canvas-setup">Set-up an HTML5 canvas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/2D Context/shapes-paths-text">Draw shapes, paths and texts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/2D Context/game-loop">Game Loop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/2D Context/canvas-animation">Canvas animation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/fresher-training-doc/docs/2D Context/physics">Collision detection and physics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/2D Context/animation">Images and sprite animations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/2D Context/make-a-game">Let&#x27;s make a game</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/fresher-training-doc/docs/WebGL/introduction">WebGL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/fresher-training-doc/docs/PixiJS/introduction">PixiJS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/fresher-training-doc/docs/Topics/vector">Topics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/Topics/vector">Vector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/Topics/tween">Tween</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/Topics/pool">Object Pool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fresher-training-doc/docs/Topics/event">Event emitter</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/fresher-training-doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">2D Context</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Collision detection and physics</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Collision detection and physics</h1></header>
<p>Perform collision detection and react with physics, using JavaScript. Check for overlap between shapes, apply hitboxes and calculate new velocities. Make it more natural with object mass, gravity and restitution. By the end of this tutorial, you&#x27;ll have a basic physics simulation running in your game.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-some-moving-objects">Create some moving objects<a href="#create-some-moving-objects" class="hash-link" aria-label="Direct link to Create some moving objects" title="Direct link to Create some moving objects">​</a></h3>
<p>Before you can detect collisions between moving objects, you&#x27;ll need some objects to begin with. In the previous tutorial you&#x27;ve learned how to move a single rectangle. Let&#x27;s expand that logic and create a whole bunch of moving objects to fill your game. First, define a new type of game object. It&#x27;s going to be a simple square.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Square</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">GameObject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">constructor</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">context</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> x</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> y</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> vx</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> vy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> vx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> vy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Set default width and height</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">height</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">draw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Draw a simple square</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">fillStyle</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isColliding</span><span class="token operator" style="color:#393A34">?</span><span class="token string" style="color:#e3116c">&#x27;#ff8080&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;#0099b0&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">fillRect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">width</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">secondsPassed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Move with set velocity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> secondsPassed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> secondsPassed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code might look a bit familiar. There is a draw() and a update() function, just like in the previous tutorial. Only this time it is baked into a separate square <a href="https://javascript.info/class" target="_blank" rel="noopener noreferrer">class</a>. This way you can create many instances of a square and they all use the same logic to draw and update. You&#x27;ll have the behavior and looks of the square in one, easy-to-manage, place.</p>
<p>The <code>fillStyle</code> in this new class is tweaked a bit. When this object is colliding, it will change color from blue to red. You&#x27;ll see this in action when the first collisions are detected. For now, all squares will be blue.</p>
<p>All the squares <strong>inherit</strong> from the <code>GameObject</code> class. Every game object has a position and a speed. This enables you to easily create new types of game objects. They <a href="https://javascript.info/class-inheritance" target="_blank" rel="noopener noreferrer">inherit</a> the attributes and methods of the <code>GameObject</code> class. The square is just an example, but you could also make objects like enemies or players for your game this way.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">GameObject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">constructor</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">context</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> x</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> y</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> vx</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> vy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vy</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isColliding</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can create a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new" target="_blank" rel="noopener noreferrer">new</a> instance of a class by using the new keyword. Make some squares to fill up your game world using this <code>createWorld()</code> function.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gameObjects </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Square</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">250</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Square</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">250</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Square</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">150</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Square</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">250</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">150</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Square</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">350</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">75</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Square</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the function, a bunch of squares are created. They are passed a position and speed as arguments. For now, this function is very static, but you could easily modify it to create more random squares or use some <strong>spawning algorithm</strong>.</p>
<p>Everything is in place to draw squares now. Update your game loop with the following code to loop over the newly created game objects and draw them on the screen.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gameLoop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">timeStamp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    secondsPassed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timeStamp </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> oldTimeStamp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oldTimeStamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> timeStamp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Loop over all game objects</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gameObjects</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">secondsPassed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">clearCanvas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Do the same to draw</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gameObjects</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">draw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">requestAnimationFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gameLoop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see, <code>update()</code> and <code>draw()</code> are no longer just called once per iteration. There are called once for every object on screen, every iteration.</p>
<p>This way the implementation of <code>update()</code> and <code>draw()</code> is <strong>object-specific</strong>. For the game loop it doesn&#x27;t matter what kind of objects you are trying to draw, as long as they have an <code>update()</code> and <code>draw()</code> function.</p>
<p>For the square you are using, it will draw a simple square and move it in a straight line. But imagine other types of objects who have their own implementation of the two functions and have behavior and looks of their own. This game loop can handle it.</p>
<p>By the way, did you notice the <code>use strict</code> line missing in these new classes? That&#x27;s because classes defined with the class keyword are strict by default. So, there is no need to specifically add <code>use strict</code> in these classes.</p>
<p>Take a look at the result:</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-objects-8e229a34ba76c8987d2bf450589687d7.gif" width="600" height="321" class="img_ev3q"></p>
<p>You can see a bunch of rectangles getting drawn now. They each have their own starting position and move in a different direction. Just as defined in the <code>createWorld()</code> function. You can tweak the variables to create new types of squares.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-do-you-need-collision-detection">Why do you need collision detection?<a href="#why-do-you-need-collision-detection" class="hash-link" aria-label="Direct link to Why do you need collision detection?" title="Direct link to Why do you need collision detection?">​</a></h3>
<p>The squares may overlap in their movement, but that doesn&#x27;t do much for now. It would be cool if the squares could interact and behave like actual <strong>solid objects</strong> and bounce off of each other.  make this happen, they would have to start with knowing they&#x27;re colliding with one another. That&#x27;s where <strong>collision detection</strong> comes in.</p>
<p>Collision detection is the art of detecting if two objects are colliding with each other, or did so between now and the last frame. It&#x27;s the first step of implementing physics in your game.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-for-collisions-between-objects">Check for collisions between objects<a href="#check-for-collisions-between-objects" class="hash-link" aria-label="Direct link to Check for collisions between objects" title="Direct link to Check for collisions between objects">​</a></h3>
<p>The squares are moving on the screen, but there is no form of interaction jet. It&#x27;s like they don&#x27;t notice each other. Let&#x27;s do something about that.</p>
<p>You are going to check for collisions between the moving objects. That requires you to loop over all objects and check if any of them overlaps with another. You&#x27;ll need a <a href="https://www.educba.com/nested-loop-in-javascript/" target="_blank" rel="noopener noreferrer">nested for loop</a> for this.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">detectCollisions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Reset collision state of all objects</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gameObjects</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isColliding</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Start checking for collisions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        obj1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            obj2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">j</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Compare object1 with object2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rectIntersect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">width</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">width</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isColliding</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isColliding</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>All objects are checked for intersection with each other. The second for loop is a bit smarter and skips all previous checked items. You don&#x27;t have to check objects twice. If they overlap the first time, they will too the second time. And of course, you don&#x27;t have to check an object against itself, it would always overlap.</p>
<p>The function calls <code>rectIntersect()</code> for every combination of objects. When it finds a collision, it sets <code>isColliding</code> to true for both objects involved.</p>
<p>Remember the <code>draw()</code> function from the square? It will react to <code>isColliding</code> and draw the square in a different color. You can easily see when two objects overlap.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-do-you-check-for-collisions">When do you check for collisions?<a href="#when-do-you-check-for-collisions" class="hash-link" aria-label="Direct link to When do you check for collisions?" title="Direct link to When do you check for collisions?">​</a></h3>
<p>Just as with the draw() method, you want to update the position of all your game objects first, before checking for collisions. This way you&#x27;ll always check for overlapping objects in their <strong>most recent state</strong>. If you do it the other way around and check for collisions before updating, you&#x27;ll be checking for overlap on the state of the previous frame. You&#x27;ll always run behind the facts.</p>
<p>Another option would be to do the collision check in the right order, but iterative. You would update object-a, check object-a for overlap with all other objects, update object-b, check object-b for overlap with all other objects, and so on. This is also an incorrect way of doing a collision check. Imagine object-a would be in collision with object-b after updating object-a&#x27;s position. The system would detect a collision, even though it might not have been the case when object-b would have moved first too. That&#x27;s why you&#x27;ll always have to update all objects, before doing a collision check.</p>
<p>The correct order for your game loop is, <strong>update</strong>, <strong>collision check</strong>, <strong>clear canvas</strong>, <strong>draw</strong>. So, place the <code>detectCollisions()</code> function right after the loop for updating all game objects. Your total game loop now looks like this:</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-game-loop-ae41340452d8335b639bdeeaeb70312c.jpg" width="1500" height="297" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="collision-detection-between-rectangles">Collision detection between rectangles<a href="#collision-detection-between-rectangles" class="hash-link" aria-label="Direct link to Collision detection between rectangles" title="Direct link to Collision detection between rectangles">​</a></h3>
<p>The last piece of the puzzle is the <code>rectIntersect()</code> method. You can use it to check if two rectangles overlap. Checking for overlap between two <strong>axis-aligned</strong> (unrotated) rectangles is pretty simple and straight forward. You can probably come up with a method of checking for overlap on both axis by using the position and size of the rectangles. There are a lot of ways to do this, but the next method is very efficient:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rectIntersect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x1</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> y1</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> w1</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> h1</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> x2</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> y2</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> w2</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> h2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Check x and y for overlap</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x2 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> w1 </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> x1 </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> x1 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> w2 </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> x2 </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> y2 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> h1 </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> y1 </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> y1 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> h2 </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> y2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The code detects rectangles clearly overlapping halfway, but also works in the case of one small rectangle falling completely in a large one.<br>
With this piece of code in place, you can finally check out the result. Here are the squares again, but this time they react upon each other.</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-collision-detection-8d981246def5a942c4af7a16cac49511.gif" width="600" height="321" class="img_ev3q"></p>
<p>After detecting a collision, the <code>isColliding</code> attribute is set to true. This makes the squares draw in red. You can clearly see when two objects overlap now.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-if-two-circles-overlap">Check if two circles overlap<a href="#check-if-two-circles-overlap" class="hash-link" aria-label="Direct link to Check if two circles overlap" title="Direct link to Check if two circles overlap">​</a></h3>
<p>You have a method now for checking collision between unrotated rectangles. But what if you want to do the same for circles? Well, that&#x27;s not that hard either.</p>
<p>Imagine you have two circles, each with their own radius. They are placed with a distance between them. The circles would overlap if the <strong>distance is smaller</strong> than the <strong>sum of the radius</strong> of both circles. Since circles are round, this would even work when rotating the objects, they don&#x27;t have to be axis-aligned.</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-circle-2ad082618554bb36bb0d8a590e89164b.jpg" width="512" height="294" class="img_ev3q"></p>
<blockquote>
<p>Calculate distance between two points<br>
You can calculate the distance between two points with the following formula:<br>
c = sqrt((x1 - x2)2 + (y1 - y2)2)<br>
If you think of Δx and Δy as two sides of a triangle, it basically applies the <a href="https://en.wikipedia.org/wiki/Pythagorean_theorem" target="_blank" rel="noopener noreferrer">Pythagorean theorem</a> to compute the size of the straight line between the points, c, the distance.</p>
</blockquote>
<p>So, if this distance is smaller than or equal to the radius of circle-a plus circle-b, the circles overlap or touch. This principle is used in the next function:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">circleIntersect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x1</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> y1</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> r1</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> x2</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> y2</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> r2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Calculate the distance between the two circles</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> squareDistance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x1</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">x2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x1</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">x2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y1</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">y2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y1</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">y2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// When the distance is smaller or equal to the sum</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// of the two radius, the circles touch or overlap</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> squareDistance </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r1 </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> r2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r1 </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> r2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see, the formula is tweaked a bit. Multiplication is much faster than getting the square root with <code>Math.sqrt()</code>,  the distance is calculated without getting the root and the sum of the radii is multiplied by itself. The outcome stays the same, but the performance is better.</p>
<p>Here is the same example as before, but with circles this time:</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-circle-collision-a0070fb53251d529a76c84ad1c9aa429.gif" width="600" height="321" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-about-other-shapes">What about other shapes?<a href="#what-about-other-shapes" class="hash-link" aria-label="Direct link to What about other shapes?" title="Direct link to What about other shapes?">​</a></h3>
<p>In this article, collision detection is only covered for two types of shapes. But what if your game objects consist of other, more complex, shapes or even images and you want to perform collision checks between them?</p>
<p>Well, for geometric shapes you can find other formulas to detect when two objects overlap. Here&#x27;s a website who covers <a href="http://www.jeffreythompson.org/collision-detection/table_of_contents.php" target="_blank" rel="noopener noreferrer">collision detection for a lot of different shapes</a>. Overall, more complex shapes make collision detection more difficult. And for images you could apply <strong>pixel perfect</strong> collision detection. The downside of this is that it&#x27;s a super CPU-heavy operation. Imagine having to match every pixel with one another, it would be a heck of a job.</p>
<p>That&#x27;s why, to make things easier and put less stress on your system, developers often use <strong>hitboxes</strong> to detect collisions between complexly shaped game objects. It&#x27;s a way to make collision detection easier and uses only basic geometric shapes, like the rectangles and circles covered in this tutorial. So, before you start building support for all kinds of complex shapes, try to think of a simple way to achieve the same effect, with basic shapes and hitboxes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-hitboxes-and-how-do-you-use-them">What are hitboxes and how do you use them?<a href="#what-are-hitboxes-and-how-do-you-use-them" class="hash-link" aria-label="Direct link to What are hitboxes and how do you use them?" title="Direct link to What are hitboxes and how do you use them?">​</a></h3>
<p>Hitboxes are imaginary geometric shapes around game objects that are used to determine collision detection. Imagine you have a player figure. You won&#x27;t check its arms and legs for collision but instead just check a big imaginary rectangle that&#x27;s placed around the player.</p>
<p>You could simply use the function for rectangle collision detection, you&#x27;ve applied before, to check the hitboxes for collisions. It&#x27;s far less CPU-intensive and makes supporting complex shapes in your game much easier. In some special cases, you could even use multiple hitboxes per game object. It would still outperform the pixel perfect solution.</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-hitboxes-86d64f3f75d9447e1bca56d5eb3c502d.jpg" width="1411" height="613" class="img_ev3q"></p>
<p>The image above demonstrates the different types of collision detection. They each have their own advantages and disadvantages:</p>
<ol>
<li><strong>Pixel perfect</strong> - Super precise collision detection, but it requires some serious system resources. In most cases this is an overkill.</li>
<li><strong>Hitbox</strong> - Much better performance, but the collision detection can be pretty imprecise. In many game scenarios though, this doesn&#x27;t really matter.</li>
<li><strong>Multiple hitboxes</strong> - Less efficient than a single hitbox but it still outperforms the pixel perfect variant. And you can support complex shapes. This is a nice option to use for important game objects that need some extra precision, like the player with limbs like mentioned before. You could make a hitbox for the core and separates ones for arms, legs and the head.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="react-to-collisions-with-physics">React to collisions with physics<a href="#react-to-collisions-with-physics" class="hash-link" aria-label="Direct link to React to collisions with physics" title="Direct link to React to collisions with physics">​</a></h3>
<p>You now have game objects who can detect a collision and change color. But wouldn&#x27;t it be much cooler if the objects bounce off on each other, like real life objects? It&#x27;s time to apply some <strong>physics</strong> to your game.</p>
<p>To change the <strong>velocity</strong> of the moving objects, you&#x27;ll need to find out in what <strong>direction</strong> and with what <strong>speed</strong> the collision took place. You can then apply a change in velocity to the collided objects. The principles behind this work for both rectangles and circles.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="find-the-direction-and-speed-of-the-collision">Find the direction and speed of the collision<a href="#find-the-direction-and-speed-of-the-collision" class="hash-link" aria-label="Direct link to Find the direction and speed of the collision" title="Direct link to Find the direction and speed of the collision">​</a></h3>
<p>Imagine the next collision between two game objects. Both objects have a speed and direction of their own. They don&#x27;t hit each other exactly straight on, but just happen to cause a collision while moving on their own course.</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-vector-1-19030ae012550240a2a93c2b2d703d2c.jpg" width="320" height="270" class="img_ev3q"></p>
<p>You&#x27;ll want to find out the speed and direction of the collision so you can apply it to the velocity of the game objects. Start by creating a <strong>vector</strong> for the collision that took place. This vector is nothing more than the difference in x and y between the two colliding objects. You can see it as an arrow with <strong>length</strong> and <strong>direction</strong>. With vectors, the length is also called <a href="https://onlinemschool.com/math/library/vector/length/" target="_blank" rel="noopener noreferrer">magnitude</a>. Calculate the collision vector like this:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> vCollision </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the example of the two game objects, the collision vector will look like this:</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-vector-2-a4d053313656d7a692e8a68036e31d4b.jpg" width="320" height="236" class="img_ev3q"></p>
<p>The magnitude in this case, is equal to the distance between the two colliding objects. It has nothing to do with speed yet. But you can use the direction of the vector. To get to the direction, you need to take away the factor of the distance.</p>
<p>Let&#x27;s first calculate the <strong>distance</strong> of the collision vector. You can use the same formula as you did before to calculate the distance between two colliding circles. So the code becomes:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> distance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sqrt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now use the distance to compute a <strong>normalized collision vector</strong>. You basically remove the distance as a factor in the collision vector, so you are left with just a direction. The collision norm is in the same direction as the collision vector, only with norm/magnitude/length 1. You also call this an <a href="https://mathworld.wolfram.com/UnitVector.html" target="_blank" rel="noopener noreferrer">unit vector</a>. You can calculate the normalized vector like this:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> vCollisionNorm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> vCollision</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> distance</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> vCollision</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> distance</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will basically leave you with just a direction for the collision. In the example of the two game objects, it will look like this:
<img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="320" height="227" class="img_ev3q"></p>
<p>You now have a <strong>direction</strong>. This is the direction in which the collision took place. All you need now is the collision <strong>speed</strong> and you&#x27;ll be able to calculate how the velocity of the objects will be affected by the collision. You can calculate the speed of the collision like this:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> vRelativeVelocity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> speed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vRelativeVelocity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> vRelativeVelocity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As first row in the example code, another vector is created with the relative velocity of the objects. It&#x27;s like the vector you would have left if you would make one of the game objects stationary. (You can read more about <a href="https://www.schoolphysics.co.uk/age16-19/Mechanics/Kinematics/text/Relative_velocity/index.html" target="_blank" rel="noopener noreferrer">relative velocities</a> here.) It&#x27;s easier to understand in the next example. The vectors of the two game objects are displayed on top of each other, so you can visualize the <strong>relative velocity vector</strong>:</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-relative-vector-8081b422d859b167b3b075302af9aede.png" width="320" height="380" class="img_ev3q"></p>
<p>Together with the collision normal, the relative velocity vector is used to calculate the <strong>dot product</strong> of the two vectors. The dot product is the length of the projection of relative velocity on the collision normal. Or in other words, the length of the velocity vector when it&#x27;s in the direction of the collision. Learn more about <a href="https://www.mathsisfun.com/algebra/vectors-dot-product.html" target="_blank" rel="noopener noreferrer">dot products</a> here. Learn more about <a href="http://victorjs.org/" target="_blank" rel="noopener noreferrer">vector operations</a> here.</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-dot-product-63dd9e8b14dc8d53f0ee0215eb4b5774.png" width="320" height="287" class="img_ev3q"></p>
<p>The dot product is equal to the <strong>speed</strong> of the collision. So that&#x27;s it, you&#x27;ve got a speed and direction of the collision between the two objects. You can apply this to the velocity of the game objects and make them bounce off of each other.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="change-velocity-of-the-moving-objects">Change velocity of the moving objects<a href="#change-velocity-of-the-moving-objects" class="hash-link" aria-label="Direct link to Change velocity of the moving objects" title="Direct link to Change velocity of the moving objects">​</a></h3>
<p>The speed of the collision can be positive or negative. When it&#x27;s positive, the objects are moving toward each other. When it&#x27;s negative, they move away. When objects move away, there is no need to perform any further action. They will move out of collision on their own.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">speed </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For the other case, when objects are moving toward each other, apply the speed in the direction of the collision. Both objects get the same change in velocity from the collision. Subtract or add the velocity to the velocity of the two collided objects.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">speed </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">speed </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">speed </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">speed </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That&#x27;s it, by applying speed to direction you calculate the <strong>collision velocity</strong>. And that velocity is now processed in the velocity of the objects involved. Your game objects should bounce in a natural looking way.</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-collision-3be87efef066823e4c9320e4ca4c80e6.gif" width="600" height="322" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-mass-impulse-and-momentum">Add mass, impulse and momentum<a href="#add-mass-impulse-and-momentum" class="hash-link" aria-label="Direct link to Add mass, impulse and momentum" title="Direct link to Add mass, impulse and momentum">​</a></h3>
<p>You can apply physics even further and take <strong>mass</strong> into the equation by calculating the <strong>collision impulse</strong> from the speed. Use the impulse to calculate <strong>momentum</strong>. Heavy objects will push light ones aside.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> impulse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> speed </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">mass</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">impulse </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">impulse </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">impulse </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">impulse </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">mass</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you have two objects with a mass of 1, the impulse is just equal to the speed. In other cases, you basically split the speed into many small parts. Heavy objects receive a few of those parts as momentum, light objects a lot. This makes the lighter objects more effected by the collision.</p>
<p>If you have two objects with a mass of 1, the impulse is just equal to the speed. In other cases, you basically split the speed into many small parts. Heavy objects receive a few of those parts as momentum, light objects a lot. This makes the lighter objects more effected by the collision.</p>
<p>Don&#x27;t forget to add mass to your game objects. The <code>GameObject</code> class is a good place to store mass. You can modify the <code>createWorld()</code> function to pass mass as an argument via the <code>Circle</code> and <code>Rectangle</code> classes.</p>
<p>Here&#x27;s an example that&#x27;s modified to create a lot of small circles and two larger ones. (The spawning algorithm isn&#x27;t very smart so the objects might start in collision)</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-mass-162126f33389e3843419fb987cd6863c.gif" width="600" height="321" class="img_ev3q"></p>
<p>In the example, the big circles have a very large mass compared to the smaller circles. They push everything out of their way. But when the two heavy objects hit each other, they bounce off too.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-heading-of-the-objects">Get the heading of the objects<a href="#get-the-heading-of-the-objects" class="hash-link" aria-label="Direct link to Get the heading of the objects" title="Direct link to Get the heading of the objects">​</a></h3>
<p>The objects are constantly colliding and changing direction. For a game it would be helpful to know which direction exactly, so you can add rotated textures or build game logic based on it. Let&#x27;s calculate it!</p>
<p>You can easily get the <strong>angle of the objects</strong> by using <code>Math.atan2()</code> on the x and y velocities. The result is in The result is in <strong>radians</strong>, use <code>Math.PI</code> to translate it to <strong>degrees</strong>. Here&#x27;s an example which calculates the angle in your <code>update()</code> function:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">secondsPassed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Move with set velocity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> secondsPassed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> secondsPassed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Calculate the angle (vy before vx)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> radians </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">atan2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Convert to degrees</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> degrees </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">180</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> radians </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">PI</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can use the angle later in your game, to <strong>draw rotated images</strong>. For now, rotating isn&#x27;t so interesting since the circle is a plain shape. You wouldn&#x27;t notice a change in rotation. So, here&#x27;s a simple implementation that shows the <strong>movement direction</strong> of the objects with a little line. The higher the speed, the longer the line. This basically represents the <strong>heading vector</strong> of the object. You can easily add this visualisation to your drawing function.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">draw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Other drawing operations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Draw heading vector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">beginPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">moveTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">lineTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stroke</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-effects-of-gravity">Add the effects of gravity<a href="#add-the-effects-of-gravity" class="hash-link" aria-label="Direct link to Add the effects of gravity" title="Direct link to Add the effects of gravity">​</a></h3>
<p>The examples shown in this tutorial contain just a basic implementation of physics. You could add more aspects to your game to make it look even <strong>more natural</strong>. Things like <strong>gravity</strong> or <strong>restitution</strong> aren&#x27;t too hard to implement. Let&#x27;s start right now with adding gravity to your simulation.</p>
<p>For <strong>gravity</strong>, simply adjust the y-speed of your objects with the <a href="https://www.physicsclassroom.com/class/1DKin/Lesson-5/Acceleration-of-Gravity" target="_blank" rel="noopener noreferrer">gravitational acceleration</a>. On Earth, it&#x27;s about <em>9.81 meter per second per second</em>. You can apply it inside the <code>update()</code> function of your game objects. Every second, g is added to the y-speed, this will make the object fall <strong>faster and faster</strong>.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Set gravitational acceleration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> g </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9.81</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">secondsPassed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Apply acceleration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> g </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> secondsPassed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Move with set velocity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> secondsPassed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> secondsPassed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Update the velocity before you update the position. This will give more accurate results, as explained in this article about <a href="https://gafferongames.com/post/integration_basics/" target="_blank" rel="noopener noreferrer">integrating the equations of motion</a>. This type of integration is called <strong>Semi-implicit Euler</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="confine-the-movement-space-of-the-objects">Confine the movement space of the objects<a href="#confine-the-movement-space-of-the-objects" class="hash-link" aria-label="Direct link to Confine the movement space of the objects" title="Direct link to Confine the movement space of the objects">​</a></h3>
<p>For the effects of gravity to show nicely, you can limit the movement of your objects to the edges of the canvas. It will act like <strong>a closed box</strong> on which the objects can bounce off.</p>
<p>You can make it happen with a simple adjustment. Execute the next function right after your main collision detection function, so <em>object-edge</em> collisions are checked together with the <em>object-object</em> collisions.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Define the edges of the canvas</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> canvasWidth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">750</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> canvasHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Set a restitution, a lower value will lose more energy when colliding</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> restitution </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.90</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">detectEdgeCollisions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gameObjects</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// Check for left and right</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">radius</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> restitution</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">radius</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> canvasWidth </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">radius</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> restitution</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> canvasWidth </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">radius</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// Check for bottom and top</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">radius</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> restitution</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">radius</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> canvasHeight </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">radius</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> restitution</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> canvasHeight </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">radius</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It basically checks for objects positioned <strong>beyond the edges</strong> and resets their position to fall within the box again. The speed of the objects is then flipped to move <strong>perpendicular</strong> to the wall.</p>
<p>It&#x27;s a very basic implementation and only works this way because the edges of the canvas are <strong>predefined straight lines</strong>. You could do the same with a <em>circle-line</em> collision and set-up dynamic lines, but that would be much more complicated than this quick example.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="absorb-impact-by-implementing-restitution">Absorb impact by implementing restitution<a href="#absorb-impact-by-implementing-restitution" class="hash-link" aria-label="Direct link to Absorb impact by implementing restitution" title="Direct link to Absorb impact by implementing restitution">​</a></h3>
<p>If you ran the code up till now, you&#x27;ll see the game objects will never get in a resting state. They will keep bouncing and bouncing and never <strong>lose any energy</strong>. To counter this, you can implement <strong>restitution</strong>.</p>
<p>Restitution basically describes how much <strong>energy is left</strong> after each collision. It has an effect on the bounciness of objects. The ratio between the <strong>starting and ending velocity</strong> after a bounce is called <strong>coefficient of restitution</strong>, or <em>COR</em>.</p>
<ul>
<li>Objects with a <em>COR</em> of <em>0</em> would absorb all energy on impact, like a bag of sand hitting the floor.</li>
<li>Objects with a <em>COR</em> of <em>1</em> would have perfect elasticity, like a super bouncy bouncing ball.</li>
<li>Objects with a <em>COR</em> &gt; <em>1</em> are completely fictional and would add extra energy after each collision.</li>
</ul>
<p>In the previous coding example, the <em>COR</em> is being applied to the collision with the edges. This will make the objects lose just a little bit of <strong>energy</strong> after each bounce. It will make the simulation much more realistic, leaving it out would let the objects bounce on forever.</p>
<p>To complete the implementation of the restitution, you&#x27;ll need to apply it to the objects involved in an <em>object-object</em> collision as well. Just multiply their speed by the <strong>COR</strong> (just <code>restitution</code> in the code). Every collision will now use up a bit of energy.</p>
<p>When two objects collide with a different restitution setting, like for instance when a bouncing ball hits a bag of sand, the lowest restitution will count. In this case, neither the bouncing ball or the bag of sand will bounce, they both inherit the restitution of the bag.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">detectCollisions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Calculate speed of the detected collision</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> speed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vRelativeVelocity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vecCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> vRelativeVelocity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vecCollisionNorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">y</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Apply restitution to the speed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    speed </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obj1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">restitution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> obj2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">restitution</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The next live canvas example shows <strong>gravity</strong>, <strong>restitution and boxing</strong> being applied.</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-gravity-59adabc9509724372174c4fa382b8023.gif" width="600" height="323" class="img_ev3q"></p>
<p>You can easily tweak the variables to create <strong>different scenarios</strong>. Set a high gravity to simulate being on a foreign planet or lower the restitution to make the objects act like bags of sand who absorb all impacts.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ways-of-improving-performance">Ways of improving performance<a href="#ways-of-improving-performance" class="hash-link" aria-label="Direct link to Ways of improving performance" title="Direct link to Ways of improving performance">​</a></h3>
<p>You might not really notice it right now, but with many game objects on screen at once or with more complex shapes, the collision detection and reaction can put some serious stress on your system. Here are some tips that might help to <strong>improve performance</strong>. They might seem obvious, but when a game gets more complex it&#x27;s easy to overlook some of these concepts.</p>
<ul>
<li>Only compare objects that are close enough to have a possible collision. You could use a grid system or only detect collision when objects enter a certain radius. This is called splitting the collision detection into a <strong>broad phase</strong> and <strong>narrow phase</strong>. Learn more about <a href="http://buildnewgames.com/broad-phase-collision-detection/" target="_blank" rel="noopener noreferrer">broad phase collision detection</a> here.</li>
<li>Keep your <strong>object pool</strong> clean. Clean up objects when they are out of view or destroyed in-game.</li>
<li>Exclude <strong>background/stationary objects</strong>. Some objects won&#x27;t ever react to collisions, so don&#x27;t include them in the iteration.</li>
<li>Use <strong>hitboxes</strong>. As explained before, hitboxes are a great way of optimizing collision detection and simplify complex shapes.</li>
<li>Adjust the <strong>implementation</strong> of collision detection and physics to fit your game. You don&#x27;t need a full physics engine when all you want to do is to make tic-tac-toe. That&#x27;s a bit of a drastic example, but you get the point. Strip your logic to only support what is needed.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handle-fast-moving-objects">Handle fast-moving objects<a href="#handle-fast-moving-objects" class="hash-link" aria-label="Direct link to Handle fast-moving objects" title="Direct link to Handle fast-moving objects">​</a></h3>
<p>One final note about collision detection. The above example detects collisions by checking if two objects overlap. This is a good solution in many cases. But it won&#x27;t work when your objects move at <strong>great speed</strong>. When the speed is higher than the size of your smallest object, objects have a chance of skipping the collision check. They <strong>pass through</strong> each other.</p>
<p>Imagine you check for a collision between a bullet and an enemy in your game. The first frame the bullet is before the enemy. There is no overlap, so the objects didn&#x27;t hit. The next frame the bullet moved so fast, it is now behind your enemy. There still is no overlap, so no collision. But the bullet did pass right through the enemy and there should&#x27;ve been a hit.</p>
<p>Here&#x27;s an image to demonstrate the situation of a fast-moving object, like a bullet, that never has any real overlap with another game object but should&#x27;ve caused a collision:</p>
<p><img decoding="async" loading="lazy" src="/fresher-training-doc/assets/images/physics-bullet-58b2e343f23f6c70e13954c74d5ff247.png" width="750" height="317" class="img_ev3q"></p>
<p>You need another approach for this kind of situation. The simplest way is to <strong>limit the speed</strong> of your game objects. In short, make sure the speed is never larger than the smallest game object, so it can&#x27;t pass through. For many types of games this is a great solution and it requires minimal effort.</p>
<p>The other solution is to perform collision detection with the <strong>projected path</strong> instead of the current position of the two objects. Try to visualize the path of a bullet as a line. The length of the line is equal to the distance the bullet will travel. Now you can use a <strong>line-to-rectangle</strong> or <strong>line-to-circle</strong> collision check to find out if the bullet will hit another object. For large bullets, you could use a rectangle instead of a line.</p>
<p>This is a simplified solution. You will probably run into other problems along the way, like finding the point of impact or determining which object of a greater set is hit first. But the steps mentioned here might help to point you in the right direction. For now, this is all on fast-moving objects for this tutorial.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/2D Context/5.physics.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/fresher-training-doc/docs/2D Context/canvas-animation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Canvas animation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/fresher-training-doc/docs/2D Context/animation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Images and sprite animations</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-some-moving-objects" class="table-of-contents__link toc-highlight">Create some moving objects</a></li><li><a href="#why-do-you-need-collision-detection" class="table-of-contents__link toc-highlight">Why do you need collision detection?</a></li><li><a href="#check-for-collisions-between-objects" class="table-of-contents__link toc-highlight">Check for collisions between objects</a></li><li><a href="#when-do-you-check-for-collisions" class="table-of-contents__link toc-highlight">When do you check for collisions?</a></li><li><a href="#collision-detection-between-rectangles" class="table-of-contents__link toc-highlight">Collision detection between rectangles</a></li><li><a href="#check-if-two-circles-overlap" class="table-of-contents__link toc-highlight">Check if two circles overlap</a></li><li><a href="#what-about-other-shapes" class="table-of-contents__link toc-highlight">What about other shapes?</a></li><li><a href="#what-are-hitboxes-and-how-do-you-use-them" class="table-of-contents__link toc-highlight">What are hitboxes and how do you use them?</a></li><li><a href="#react-to-collisions-with-physics" class="table-of-contents__link toc-highlight">React to collisions with physics</a></li><li><a href="#find-the-direction-and-speed-of-the-collision" class="table-of-contents__link toc-highlight">Find the direction and speed of the collision</a></li><li><a href="#change-velocity-of-the-moving-objects" class="table-of-contents__link toc-highlight">Change velocity of the moving objects</a></li><li><a href="#add-mass-impulse-and-momentum" class="table-of-contents__link toc-highlight">Add mass, impulse and momentum</a></li><li><a href="#get-the-heading-of-the-objects" class="table-of-contents__link toc-highlight">Get the heading of the objects</a></li><li><a href="#add-the-effects-of-gravity" class="table-of-contents__link toc-highlight">Add the effects of gravity</a></li><li><a href="#confine-the-movement-space-of-the-objects" class="table-of-contents__link toc-highlight">Confine the movement space of the objects</a></li><li><a href="#absorb-impact-by-implementing-restitution" class="table-of-contents__link toc-highlight">Absorb impact by implementing restitution</a></li><li><a href="#ways-of-improving-performance" class="table-of-contents__link toc-highlight">Ways of improving performance</a></li><li><a href="#handle-fast-moving-objects" class="table-of-contents__link toc-highlight">Handle fast-moving objects</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Purus Games, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>